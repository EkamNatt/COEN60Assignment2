<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Weekly Schedule</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .activity-bar {
            fill-opacity: 0.7;
            stroke: black;
            stroke-width: 1;
        }
    </style>
</head>

<body>
    <h1>My Weekly Schedule</h1>
    <div id="schedule"></div>
    <h2>Average Hours Per Activity</h2>
    <div id="statistics"></div>

    <script>
        const width = 900;
        const height = 300;
        const dayHeight = height / 7; 

        const activities = [
            { name: 'sleep', color: 'grey' },
            { name: 'study', color: 'blue' },
            { name: 'play', color: 'green' },
            { name: 'exercise', color: 'purple' },
            { name: 'social', color: 'yellow' },
            { name: 'eat', color: 'orange' },
            { name: 'gym', color: '#FFA500' },
            { name: 'chore', color: '#FF4500' },
            { name: 'research', color: '#2E8B57' },
            { name: 'eat+social', color: '#8B4513' },
            { name: 'in-transit', color: '#DB7093' },
            { name: 'meeting', color: '#7B68EE' },
            { name: 'class', color: '#00CED1' },
            { name: 'tennis', color: '#3CB371' }
        ];

        const scheduleData = [
            { day: 'Sunday', activities: { gym: 1, chore: 2, research: 8, "eat+social": 6, "in-transit": 1, sleep: 6 } },
            { day: 'Monday', activities: { meeting: 2, class: 3, research: 8, tennis: 1, eat: 1, social: 1, "in-transit": 1, sleep: 7 } },
        ];

        // Create SVG element for schedule
        const svgSchedule = d3.select("#schedule").append("svg")
            .attr("width", width)
            .attr("height", height);

        // Process and render the schedule data
        scheduleData.forEach((dayData, dayIndex) => {
            let xOffset = 0;
            for (const activity in dayData.activities) {
                const activityData = activities.find(a => a.name === activity);
                const activityWidth = (dayData.activities[activity] / 24) * width;

                svgSchedule.append("rect")
                    .attr("x", xOffset)
                    .attr("y", dayHeight * dayIndex)
                    .attr("width", activityWidth)
                    .attr("height", dayHeight)
                    .attr("fill", activityData.color)
                    .attr("class", "activity-bar");

                xOffset += activityWidth;
            }

            svgSchedule.append("text")
                .attr("x", 10)
                .attr("y", dayHeight * dayIndex + (dayHeight / 2) + 5)
                .text(dayData.day);
        });

        // Bar chart statistics
        const svgStats = d3.select("#statistics").append("svg")
            .attr("width", width)
            .attr("height", height);

        let activityTotals = {};

        activities.forEach(activity => {
            activityTotals[activity.name] = 0;
        });

        scheduleData.forEach(dayData => {
            for (const activity in dayData.activities) {
                activityTotals[activity] += dayData.activities[activity];
            }
        });

        let yOffset = 0;
        const barWidth = 30;
        const barSpacing = 40;

        for (const activity in activityTotals) {
            const activityData = activities.find(a => a.name === activity);

            svgStats.append("rect")
                .attr("x", yOffset)
                .attr("y", height - activityTotals[activity] * 10)
                .attr("width", barWidth)
                .attr("height", activityTotals[activity] * 10)
                .attr("fill", activityData.color)
                .attr("class", "activity-bar");

            svgStats.append("text")
                .attr("x", yOffset + barWidth / 2)
                .attr("y", height - activityTotals[activity] * 10 - 5)
                .attr("text-anchor", "middle")
                .text(activity);

            yOffset += barSpacing;
        }
    </script>
</body>

</html>
